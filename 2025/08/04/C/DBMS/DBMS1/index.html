<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核 | 曜花缘的技术笔记</title><meta name="author" content="曜花缘"><meta name="copyright" content="曜花缘"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="✅ 项目结构总览（用于博客第一篇） 我们可以把这篇文章作为整个系列的开篇，标题如下：  【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核  摘要：本文将带你走进一个从零实现的关系型数据库内核项目，采用C语言构建，涵盖存储引擎、事务、日志、SQL解析、查询优化与执行等核心模块。项目结构清晰、测试完备，是校招面试中极具竞争力的系统设计案例。   🧭 项目背景与目标 在">
<meta property="og:type" content="article">
<meta property="og:title" content="【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核">
<meta property="og:url" content="https://yaohuayuan.github.io/2025/08/04/C/DBMS/DBMS1/index.html">
<meta property="og:site_name" content="曜花缘的技术笔记">
<meta property="og:description" content="✅ 项目结构总览（用于博客第一篇） 我们可以把这篇文章作为整个系列的开篇，标题如下：  【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核  摘要：本文将带你走进一个从零实现的关系型数据库内核项目，采用C语言构建，涵盖存储引擎、事务、日志、SQL解析、查询优化与执行等核心模块。项目结构清晰、测试完备，是校招面试中极具竞争力的系统设计案例。   🧭 项目背景与目标 在">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yaohuayuan.github.io/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-08-04T01:45:27.000Z">
<meta property="article:modified_time" content="2025-08-04T07:44:32.000Z">
<meta property="article:author" content="曜花缘">
<meta property="article:tag" content="C语言">
<meta property="article:tag" content="DBMS设计">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yaohuayuan.github.io/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核",
  "url": "https://yaohuayuan.github.io/2025/08/04/C/DBMS/DBMS1/",
  "image": "https://yaohuayuan.github.io/img/butterfly-icon.png",
  "datePublished": "2025-08-04T01:45:27.000Z",
  "dateModified": "2025-08-04T07:44:32.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "曜花缘",
      "url": "https://yaohuayuan.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yaohuayuan.github.io/2025/08/04/C/DBMS/DBMS1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><span> 力扣</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E5%8A%9B%E6%89%A3/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"><i class="fa-fw fas fa-calendar-day"></i><span> 每日一题</span></a></li><li><a class="site-page child" href="/categories/%E5%8A%9B%E6%89%A3/%E5%91%A8%E8%B5%9B/"><i class="fa-fw fas fa-trophy"></i><span> 周赛</span></a></li><li><a class="site-page child" href="/categories/%E5%8A%9B%E6%89%A3/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/"><i class="fa-fw fas fa-history"></i><span> 刷题记录</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><span> 计算机基础</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><i class="fa-fw fas fa-diagram-project"></i><span> 数据结构</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%AE%9E%E7%8E%B0%EF%BC%89/"><i class="fa-fw fas fa-microchip"></i><span> 操作系统</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/"><i class="fa-fw fas fa-cogs"></i><span> 计算机组成</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><i class="fa-fw fas fa-network-wired"></i><span> 计算机网络</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/DBMS%E8%AE%BE%E8%AE%A1/"><i class="fa-fw fas fa-database"></i><span> DBMS设计</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><span> 数学建模</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/A%E9%A2%98/"><i class="fa-fw fas fa-a"></i><span> A题</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/B%E9%A2%98/"><i class="fa-fw fas fa-b"></i><span> B题</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/C%E9%A2%98/"><i class="fa-fw fas fa-c"></i><span> C题</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 我的博客</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">曜花缘的技术笔记</span></a><a class="nav-page-title" href="/"><span class="site-name">【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><span> 力扣</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E5%8A%9B%E6%89%A3/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"><i class="fa-fw fas fa-calendar-day"></i><span> 每日一题</span></a></li><li><a class="site-page child" href="/categories/%E5%8A%9B%E6%89%A3/%E5%91%A8%E8%B5%9B/"><i class="fa-fw fas fa-trophy"></i><span> 周赛</span></a></li><li><a class="site-page child" href="/categories/%E5%8A%9B%E6%89%A3/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/"><i class="fa-fw fas fa-history"></i><span> 刷题记录</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><span> 计算机基础</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><i class="fa-fw fas fa-diagram-project"></i><span> 数据结构</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%AE%9E%E7%8E%B0%EF%BC%89/"><i class="fa-fw fas fa-microchip"></i><span> 操作系统</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/"><i class="fa-fw fas fa-cogs"></i><span> 计算机组成</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><i class="fa-fw fas fa-network-wired"></i><span> 计算机网络</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/DBMS%E8%AE%BE%E8%AE%A1/"><i class="fa-fw fas fa-database"></i><span> DBMS设计</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><span> 数学建模</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/A%E9%A2%98/"><i class="fa-fw fas fa-a"></i><span> A题</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/B%E9%A2%98/"><i class="fa-fw fas fa-b"></i><span> B题</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/C%E9%A2%98/"><i class="fa-fw fas fa-c"></i><span> C题</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 我的博客</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-08-04T01:45:27.000Z" title="发表于 2025-08-04 09:45:27">2025-08-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-04T07:44:32.000Z" title="更新于 2025-08-04 15:44:32">2025-08-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/DBMS%E8%AE%BE%E8%AE%A1/">DBMS设计</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h3 id="✅-项目结构总览-用于博客第一篇">✅ 项目结构总览（用于博客第一篇）</h3>
<p>我们可以把这篇文章作为整个系列的开篇，标题如下：</p>
<hr>
<h2 id="从零开始写dbms-项目总览与架构设计：一个c语言实现的轻量级关系型数据库内核">【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核</h2>
<blockquote>
<p>摘要：本文将带你走进一个从零实现的关系型数据库内核项目，采用C语言构建，涵盖存储引擎、事务、日志、SQL解析、查询优化与执行等核心模块。项目结构清晰、测试完备，是校招面试中极具竞争力的系统设计案例。</p>
</blockquote>
<hr>
<h3 id="🧭-项目背景与目标">🧭 项目背景与目标</h3>
<p>在数据库课程或面试中，<strong>“如何设计一个DBMS”</strong> 是一道高频题。本项目的目标是：</p>
<ul>
<li><strong>不依赖第三方库</strong>，用C语言实现一个<strong>教学级但结构完整</strong>的DBMS内核；</li>
<li>覆盖<strong>存储、索引、事务、日志、SQL解析、查询优化与执行</strong>等核心模块；</li>
<li>每个模块都配有<strong>单元测试</strong>，可独立验证；</li>
<li>最终可运行简单SQL（如 <code>SELECT</code>, <code>INSERT</code>, <code>CREATE TABLE</code> 等）；</li>
<li>为校招面试提供<strong>可落地的系统设计案例</strong>。</li>
</ul>
<hr>
<h3 id="🧱-工程结构一览">🧱 工程结构一览</h3>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">NewDBMS/</span><br><span class="line">├── File/               # 文件系统与页管理（BlockID, Page, FileManager）</span><br><span class="line">├── buffer/             # 缓冲区管理（Buffer, BufferManager）</span><br><span class="line">├── tx/                 # 事务系统（Transaction, LockTable, RecoveryManager）</span><br><span class="line">├── Log/                # WAL日志系统（LogManager, LogRecord）</span><br><span class="line">├── record/             # 记录管理（Schema, TableScan, RecordPage）</span><br><span class="line">├── index/              # 索引（目前为HashIndex）</span><br><span class="line">├── metadata/           # 元数据管理（表、视图、索引、统计信息）</span><br><span class="line">├── parse/              # SQL解析器（Lexer, Parser, AST）</span><br><span class="line">├── plan/               # 查询计划与优化器（Plan, Planner）</span><br><span class="line">├── query/              # 查询执行引擎（Scan, Predicate, Expression）</span><br><span class="line">├── DBMS/               # 顶层入口与初始化</span><br><span class="line">├── Lib/                # 工具库（ByteBuffer, CMap, RBT, CString, CVector...）</span><br><span class="line">├── test/               # 单元测试（每模块独立测试）</span><br><span class="line">├── bin/                # 可执行文件与测试输出</span><br><span class="line">├── cmake-build-debug/  # CMake构建输出</span><br><span class="line">├── external/           # 第三方依赖（cmocka测试框架）</span><br><span class="line">├── main.c              # 入口文件</span><br><span class="line">├── CMakeLists.txt      # 构建配置</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="🧩-核心模块划分与职责">🧩 核心模块划分与职责</h3>
<table>
<thead>
<tr>
<th>模块</th>
<th>子模块</th>
<th>职责</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>File</strong></td>
<td>BlockID, Page, FileManager</td>
<td>磁盘页读写、文件抽象</td>
</tr>
<tr>
<td><strong>Buffer</strong></td>
<td>Buffer, BufferManager</td>
<td>页缓存、LRU替换、并发控制</td>
</tr>
<tr>
<td><strong>Transaction</strong></td>
<td>TransactionManager, LockTable, RecoveryManager</td>
<td>ACID、2PL、WAL、崩溃恢复</td>
</tr>
<tr>
<td><strong>Record</strong></td>
<td>Schema, TableScan, RecordPage</td>
<td>行存储、字段布局、记录扫描</td>
</tr>
<tr>
<td><strong>Index</strong></td>
<td>HashIndex</td>
<td>哈希索引实现（可扩展B+树）</td>
</tr>
<tr>
<td><strong>Metadata</strong></td>
<td>TableManager, IndexManager, ViewManager</td>
<td>系统表、元数据缓存</td>
</tr>
<tr>
<td><strong>Parser</strong></td>
<td>Lexer, Parser, AST节点</td>
<td>SQL解析为抽象语法树</td>
</tr>
<tr>
<td><strong>Planner</strong></td>
<td>BasicQueryPlanner, BasicUpdatePlanner</td>
<td>查询计划生成与优化</td>
</tr>
<tr>
<td><strong>Query</strong></td>
<td>Scan, Predicate, Expression</td>
<td>查询执行引擎（火山模型）</td>
</tr>
<tr>
<td><strong>Lib</strong></td>
<td>ByteBuffer, CMap, RBT, CString</td>
<td>通用数据结构工具库</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="✅-测试体系">✅ 测试体系</h3>
<ul>
<li><strong>cmocka</strong> 作为测试框架；</li>
<li>每个模块都有独立测试目录；</li>
<li>支持<strong>单元测试 + 集成测试</strong>；</li>
<li>可运行 <code>BufferTest</code>, <code>TXTest</code>, <code>RecordTest</code>, <code>LogTest</code> 等。</li>
</ul>
<hr>
<h3 id="🧪-当前支持的功能-截至2025年8月">🧪 当前支持的功能（截至2025年8月）</h3>
<table>
<thead>
<tr>
<th>功能</th>
<th>支持情况</th>
</tr>
</thead>
<tbody>
<tr>
<td>创建表</td>
<td>✅</td>
</tr>
<tr>
<td>插入记录</td>
<td>✅</td>
</tr>
<tr>
<td>简单查询（SELECT）</td>
<td>✅</td>
</tr>
<tr>
<td>事务（BEGIN/COMMIT/ROLLBACK）</td>
<td>✅</td>
</tr>
<tr>
<td>WAL日志与崩溃恢复</td>
<td>✅</td>
</tr>
<tr>
<td>哈希索引</td>
<td>✅</td>
</tr>
<tr>
<td>行级锁</td>
<td>✅</td>
</tr>
<tr>
<td>SQL解析</td>
<td>✅</td>
</tr>
<tr>
<td>查询计划生成</td>
<td>✅</td>
</tr>
<tr>
<td>缓冲区管理</td>
<td>✅</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="🚀-后续计划-博客系列预告">🚀 后续计划（博客系列预告）</h3>
<p>我们将围绕以下主题展开系列博客：</p>
<ol>
<li>存储引擎：如何构建一个基于页的存储系统</li>
<li>缓冲区管理：LRU与Clock算法的实现</li>
<li>事务系统：MVCC与两阶段锁的实现</li>
<li>WAL日志与崩溃恢复：ARIES算法实战</li>
<li>SQL解析器：手写递归下降语法分析器</li>
<li>查询优化器：从RBO到CBO的演进</li>
<li>执行引擎：火山模型与向量化执行</li>
<li>索引系统：从哈希索引到B+树</li>
<li>元数据管理与系统表设计</li>
<li>测试与benchmark：如何验证一个DBMS的正确性</li>
</ol>
<hr>
<h3 id="📁-github-仓库地址">📁 GitHub 仓库地址（</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/yourname/NewDBMS">https://github.com/yourname/NewDBMS</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://yaohuayuan.github.io">曜花缘</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://yaohuayuan.github.io/2025/08/04/C/DBMS/DBMS1/">https://yaohuayuan.github.io/2025/08/04/C/DBMS/DBMS1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://yaohuayuan.github.io" target="_blank">曜花缘的技术笔记</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C%E8%AF%AD%E8%A8%80/">C语言</a><a class="post-meta__tags" href="/tags/DBMS%E8%AE%BE%E8%AE%A1/">DBMS设计</a></div><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/06/23/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new &quot;My New Post&quot; More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment </div></div></div></a><a class="pagination-related" href="/2025/08/04/C/DBMS/DBMS2/" title="【从零开始写DBMS】存储引擎之基石：BlockID、FileManager与Page的设计与实现"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">【从零开始写DBMS】存储引擎之基石：BlockID、FileManager与Page的设计与实现</div></div><div class="info-2"><div class="info-item-1">🧱 引言：为什么存储引擎是DBMS的地基？ 在数据库系统中，存储引擎是所有上层模块（事务、索引、SQL执行器）的基础。它的职责是：  将数据以**页（Page）**为单位组织在磁盘上； 提供块定位（BlockID）与文件抽象（FileManager）； 屏蔽磁盘I/O细节，向上层提供统一的字节读写接口。   🧩 模块划分与职责    模块 职责     BlockID 唯一标识磁盘上的数据块（file + blockNum）   FileManager 管理数据库目录、文件句柄、块读写、追加   Page 内存中的页结构，提供对字节数组的读写封装   ByteBuffer 底层字节缓冲区，支持顺序/随机读写   CMap / RBTree / CString 工具库，支持字符串、映射、红黑树等     🔍 BlockID：磁盘块的“身份证” ✅ 设计目标  唯一标识一个磁盘块：BlockID = (fileName, blockNum) 支持序列化/反序列化（用于日志、缓存key） 支持比较与哈希（用于索引、缓存）  ✅ 数据结构 1234typedef struct...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/08/04/C/DBMS/DBMS2/" title="【从零开始写DBMS】存储引擎之基石：BlockID、FileManager与Page的设计与实现"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-04</div><div class="info-item-2">【从零开始写DBMS】存储引擎之基石：BlockID、FileManager与Page的设计与实现</div></div><div class="info-2"><div class="info-item-1">🧱 引言：为什么存储引擎是DBMS的地基？ 在数据库系统中，存储引擎是所有上层模块（事务、索引、SQL执行器）的基础。它的职责是：  将数据以**页（Page）**为单位组织在磁盘上； 提供块定位（BlockID）与文件抽象（FileManager）； 屏蔽磁盘I/O细节，向上层提供统一的字节读写接口。   🧩 模块划分与职责    模块 职责     BlockID 唯一标识磁盘上的数据块（file + blockNum）   FileManager 管理数据库目录、文件句柄、块读写、追加   Page 内存中的页结构，提供对字节数组的读写封装   ByteBuffer 底层字节缓冲区，支持顺序/随机读写   CMap / RBTree / CString 工具库，支持字符串、映射、红黑树等     🔍 BlockID：磁盘块的“身份证” ✅ 设计目标  唯一标识一个磁盘块：BlockID = (fileName, blockNum) 支持序列化/反序列化（用于日志、缓存key） 支持比较与哈希（用于索引、缓存）  ✅ 数据结构 1234typedef struct...</div></div></div></a><a class="pagination-related" href="/2025/08/04/C/DBMS/DBMS3/" title="【从零开始写DBMS】缓冲区管理器：Pin&#x2F;UnPin 与 LRU 淘汰"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-04</div><div class="info-item-2">【从零开始写DBMS】缓冲区管理器：Pin&#x2F;UnPin 与 LRU 淘汰</div></div><div class="info-2"><div class="info-item-1">🚀 引言：为何需要 BufferManager？ 数据库频繁访问磁盘页面，如果每次都从磁盘读取，性能将极差。于是引入缓冲池（Buffer Pool），将热点页面缓存在内存中，并通过Pin/Unpin 与LRU策略高效管理有限的缓冲页。 本篇聚焦于：  Buffer：单个页的缓存封装； BufferManager：负责页面调度、替换与事务一致性； Pin/Unpin机制、LRU选择算法； 事务日志协调（lsn）。   🧱 Buffer：缓冲区的基本单元 ✅ 功能目标  封装一个Page； 追踪事务修改（txNum, lsn）； 支持 Pin/Unpin 引用计数； Flush 时写回磁盘并协调日志（LogManager）。  ✅ 数据结构定义 123456789101112131415161718192021222324252627typedef struct Buffer&#123;    FileManager *fileManager;    LogManager *logManager;    Page *page;    BlockID *blockId;   ...</div></div></div></a><a class="pagination-related" href="/2025/08/04/C/DBMS/DBMS4/" title="【从零开始写DBMS】事务管理与崩溃恢复机制全解析"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-04</div><div class="info-item-2">【从零开始写DBMS】事务管理与崩溃恢复机制全解析</div></div><div class="info-2"><div class="info-item-1">从零构建数据库系统（四）：事务管理与崩溃恢复机制全解析  本文深入讲解数据库事务子系统的设计与实现，包括日志管理、事务接口、并发控制与崩溃恢复，帮助你理解数据库如何保障 ACID 特性。   ✨ 一、事务系统的核心目标 在数据库中，事务系统需满足 ACID 四大特性：  A 原子性：事务要么全部执行，要么全部失败。 C 一致性：事务完成后数据库必须从一个一致状态转移到另一个一致状态。 I 隔离性：多个事务互不干扰，结果等价于串行执行。 D 持久性：一旦事务提交，结果就应永久保存。  为此，我们将整个事务系统拆分为三大模块：    模块 功能     Transaction 提供事务级 API（begin、commit、rollback）   RecoveryManager 实现日志记录与崩溃恢复   ConcurrencyManager 控制锁粒度与并发访问     🧱 二、Transaction 模块：事务接口的封装 1. 初始化与销毁 12Transaction *TransactionInit(FileManager *fm, LogManager *lm,...</div></div></div></a><a class="pagination-related" href="/2025/08/04/C/DBMS/DBMS5/" title="【从零开始写DBMS】查询模块：表达式、谓词与扫描器的协同"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-04</div><div class="info-item-2">【从零开始写DBMS】查询模块：表达式、谓词与扫描器的协同</div></div><div class="info-2"><div class="info-item-1"> 【从零开始写DBMS】查询模块：表达式、谓词与扫描器的协同 1. 引言 在数据库管理系统（DBMS）中，查询模块负责处理用户的查询请求，包括表达式的解析、条件的评估以及数据的扫描和过滤。本文将深入探讨DBMS中查询模块的核心组件：常量（Constant）、表达式（Expression）、谓词（Predicate）以及各种扫描器（Scan）的设计与实现。 2. 模块划分与职责 2.1 常量（Constant） 常量模块用于创建和管理两种基本数据类型的常量值：整数和字符串。它提供了初始化、类型转换、比较和内存释放等功能。 2.2 表达式（Expression） 表达式模块负责构建和评估数据库查询中的表达式。它支持两种类型的表达式：基于常量的表达式和基于字段名的表达式。 2.3 谓词（Predicate） 谓词模块用于构建和评估查询条件。它将多个条件项组合在一起，并提供条件评估、条件组合以及条件过滤等功能。 2.4...</div></div></div></a><a class="pagination-related" href="/2025/08/04/C/DBMS/DBMS6/" title="【从零开始写DBMS】查询模块：记录页与布局的实现"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-04</div><div class="info-item-2">【从零开始写DBMS】查询模块：记录页与布局的实现</div></div><div class="info-2"><div class="info-item-1"> 【从零开始写DBMS】查询模块：记录页与布局的实现 1. 引言 在数据库管理系统（DBMS）中，记录页（RecordPage）和布局（Layout）是查询模块中至关重要的组成部分。它们共同协作，实现了数据的存储、检索和更新功能。本文将深入探讨DBMS中记录页和布局的设计与实现。 2. 模块划分与职责 2.1 布局（Layout） 布局模块用于定义表的物理存储结构，包括字段的偏移量和记录的大小。它提供字段偏移量的计算、记录大小的计算等功能。 2.2 记录页（RecordPage） 记录页模块负责管理数据库中单个页的数据记录。它支持记录的插入、删除、更新和查询操作，以及记录的格式化和槽（slot）管理。 2.3 RID RID（Record IDentifier）模块用于唯一标识记录页中的记录位置，包括块编号和槽号。 2.4 表扫描器（TableScan） 表扫描器模块用于遍历表中的记录，支持记录的插入、删除、更新和查询操作，以及记录的定位和迭代。 3. 布局（Layout）设计与实现 3.1 数据结构 12345typedef struct Layout &#123;   ...</div></div></div></a><a class="pagination-related" href="/2025/08/04/C/DBMS/DBMS7/" title="【从零开始写DBMS】元数据管理器：索引、统计与表结构的协同"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-04</div><div class="info-item-2">【从零开始写DBMS】元数据管理器：索引、统计与表结构的协同</div></div><div class="info-2"><div class="info-item-1"> 【从零开始写DBMS】元数据管理器：索引、统计与表结构的协同 1. 引言 在数据库管理系统（DBMS）中，元数据管理器（MetadataManager）负责管理数据库的元数据，包括表结构、索引信息、统计信息等。本文将深入探讨DBMS中元数据管理器的设计与实现，以及它如何与其他组件协同工作。 2. 模块划分与职责 2.1 索引信息（IndexInfo） 索引信息模块用于存储和管理索引的详细信息，包括索引名称、字段名称、表模式、事务、统计信息和布局。 2.2 索引管理器（IndexManager） 索引管理器模块负责创建和管理索引，包括索引的创建、获取索引信息和释放资源。 2.3 元数据管理器（MetadataManager） 元数据管理器模块整合了表管理器、视图管理器、统计管理器和索引管理器，提供统一的接口来管理数据库的元数据。 2.4 统计信息（StatInfo） 统计信息模块用于存储表的统计信息，如块数量和记录数量，并提供相关的方法来获取这些统计信息。 2.5 统计管理器（StatManager） 统计管理器模块负责初始化、获取和刷新统计信息，并计算表的统计信息。 2.6...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">曜花缘</div><div class="author-info-description">分享编程、算法与日常点滴的个人博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yaohuayuan"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/yaohuayuan" target="_blank" title="GitHub"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88-%E7%94%A8%E4%BA%8E%E5%8D%9A%E5%AE%A2%E7%AC%AC%E4%B8%80%E7%AF%87"><span class="toc-number">1.</span> <span class="toc-text">✅ 项目结构总览（用于博客第一篇）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99dbms-%E9%A1%B9%E7%9B%AE%E6%80%BB%E8%A7%88%E4%B8%8E%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%EF%BC%9A%E4%B8%80%E4%B8%AAc%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%9A%84%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%85%E6%A0%B8"><span class="toc-number"></span> <span class="toc-text">【从零开始写DBMS】项目总览与架构设计：一个C语言实现的轻量级关系型数据库内核</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A7%AD-%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF%E4%B8%8E%E7%9B%AE%E6%A0%87"><span class="toc-number">1.</span> <span class="toc-text">🧭 项目背景与目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A7%B1-%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84%E4%B8%80%E8%A7%88"><span class="toc-number">2.</span> <span class="toc-text">🧱 工程结构一览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A7%A9-%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%88%92%E5%88%86%E4%B8%8E%E8%81%8C%E8%B4%A3"><span class="toc-number">3.</span> <span class="toc-text">🧩 核心模块划分与职责</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9C%85-%E6%B5%8B%E8%AF%95%E4%BD%93%E7%B3%BB"><span class="toc-number">4.</span> <span class="toc-text">✅ 测试体系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%A7%AA-%E5%BD%93%E5%89%8D%E6%94%AF%E6%8C%81%E7%9A%84%E5%8A%9F%E8%83%BD-%E6%88%AA%E8%87%B32025%E5%B9%B48%E6%9C%88"><span class="toc-number">5.</span> <span class="toc-text">🧪 当前支持的功能（截至2025年8月）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9A%80-%E5%90%8E%E7%BB%AD%E8%AE%A1%E5%88%92-%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%97%E9%A2%84%E5%91%8A"><span class="toc-number">6.</span> <span class="toc-text">🚀 后续计划（博客系列预告）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%81-github-%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80"><span class="toc-number">7.</span> <span class="toc-text">📁 GitHub 仓库地址（</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/04/C/DataStructure/RedBlackTree/" title="不再畏惧红黑树：从原理到代码实现">不再畏惧红黑树：从原理到代码实现</a><time datetime="2025-08-04T07:25:59.000Z" title="发表于 2025-08-04 15:25:59">2025-08-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/04/C/DBMS/DBMS3/" title="【从零开始写DBMS】缓冲区管理器：Pin/UnPin 与 LRU 淘汰">【从零开始写DBMS】缓冲区管理器：Pin/UnPin 与 LRU 淘汰</a><time datetime="2025-08-04T04:00:00.000Z" title="发表于 2025-08-04 12:00:00">2025-08-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/04/C/DBMS/DBMS4/" title="【从零开始写DBMS】事务管理与崩溃恢复机制全解析">【从零开始写DBMS】事务管理与崩溃恢复机制全解析</a><time datetime="2025-08-04T04:00:00.000Z" title="发表于 2025-08-04 12:00:00">2025-08-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/04/C/DBMS/DBMS5/" title="【从零开始写DBMS】查询模块：表达式、谓词与扫描器的协同">【从零开始写DBMS】查询模块：表达式、谓词与扫描器的协同</a><time datetime="2025-08-04T04:00:00.000Z" title="发表于 2025-08-04 12:00:00">2025-08-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/04/C/DBMS/DBMS6/" title="【从零开始写DBMS】查询模块：记录页与布局的实现">【从零开始写DBMS】查询模块：记录页与布局的实现</a><time datetime="2025-08-04T04:00:00.000Z" title="发表于 2025-08-04 12:00:00">2025-08-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By 曜花缘</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (true) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>